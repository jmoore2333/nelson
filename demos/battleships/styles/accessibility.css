/* ============================================================
   BATTLESHIPS — Accessibility Styles
   Colorblind mode, High contrast mode, Screen reader,
   Focus indicators, Reduced motion
   ============================================================ */

/* -- Screen-reader-only (visually hidden) -- */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* -- Enhanced Focus Indicators -- */
*:focus-visible {
  outline: 3px solid #2ecc71;
  outline-offset: 2px;
  box-shadow: 0 0 0 6px rgba(46, 204, 113, 0.25);
}

.cell:focus-visible {
  outline: 3px solid #2ecc71;
  outline-offset: -3px;
  box-shadow: inset 0 0 0 2px rgba(46, 204, 113, 0.5), 0 0 12px rgba(46, 204, 113, 0.4);
  z-index: 5;
}

button:focus-visible,
select:focus-visible,
.ship-option:focus-visible {
  outline: 3px solid #2ecc71;
  outline-offset: 2px;
  box-shadow: 0 0 0 6px rgba(46, 204, 113, 0.25);
}


/* ============================================================
   COLORBLIND MODE — Pattern overlays on cell states
   ============================================================ */

/* Hit cells: diagonal stripe pattern (45deg) */
.colorblind-mode .cell.hit {
  background-image:
    repeating-linear-gradient(
      45deg,
      transparent,
      transparent 4px,
      rgba(255, 255, 255, 0.35) 4px,
      rgba(255, 255, 255, 0.35) 6px
    );
  background-size: auto;
}

.colorblind-mode .cell.hit::after {
  content: '';
  position: absolute;
  top: 50%; left: 50%;
  width: 18px; height: 18px;
  transform: translate(-50%, -50%);
  border-radius: 50%;
  background: radial-gradient(circle, rgba(255,200,50,0.9) 0%, rgba(243,156,18,0.7) 30%, rgba(231,76,60,0.5) 60%, transparent 100%);
  box-shadow: 0 0 8px 3px rgba(243,156,18,0.5), 0 0 16px 6px rgba(231,76,60,0.2);
  z-index: 3;
}

/* Miss cells: dot pattern */
.colorblind-mode .cell.miss {
  background-image:
    radial-gradient(
      circle,
      rgba(255, 255, 255, 0.3) 1.5px,
      transparent 1.5px
    );
  background-size: 8px 8px;
  background-position: 0 0;
}

.colorblind-mode .cell.miss::after {
  content: '';
  position: absolute;
  top: 50%; left: 50%;
  width: 10px; height: 10px;
  transform: translate(-50%, -50%);
  border-radius: 50%;
  background: radial-gradient(circle, rgba(236,240,241,0.8) 0%, rgba(236,240,241,0.3) 50%, transparent 100%);
  opacity: 0.7;
  box-shadow: 0 0 4px rgba(236,240,241,0.3), 0 0 8px rgba(168,218,220,0.15);
}

/* Sunk cells: cross-hatch pattern */
.colorblind-mode .cell.sunk {
  background-image:
    repeating-linear-gradient(
      45deg,
      transparent,
      transparent 3px,
      rgba(255, 255, 255, 0.3) 3px,
      rgba(255, 255, 255, 0.3) 5px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 3px,
      rgba(255, 255, 255, 0.3) 3px,
      rgba(255, 255, 255, 0.3) 5px
    );
  background-size: auto;
}

/* Ship cells: horizontal stripe pattern */
.colorblind-mode .cell.ship {
  background-image:
    repeating-linear-gradient(
      0deg,
      transparent,
      transparent 5px,
      rgba(255, 255, 255, 0.2) 5px,
      rgba(255, 255, 255, 0.2) 7px
    );
  background-size: auto;
}


/* ============================================================
   HIGH CONTRAST MODE — Sharper colors, thicker borders
   ============================================================ */

/* Increase border contrast on all cells */
.high-contrast .cell {
  border: 2px solid rgba(200, 210, 220, 0.6);
}

/* Brighter text across the board */
.high-contrast {
  color: #ffffff;
}

.high-contrast .label {
  color: #e0e1dd;
  font-weight: 800;
}

.high-contrast .board-section h2 {
  color: #e0e1dd;
}

.high-contrast header h1 {
  text-shadow: 0 0 20px rgba(46, 204, 113, 0.5);
}

/* Hit: brighter, higher contrast red with thick border */
.high-contrast .cell.hit {
  background: radial-gradient(circle at center, #ffcc00 0%, #ff3300 50%, #cc0000 100%);
  border: 2px solid #ff6600;
  box-shadow: inset 0 0 10px rgba(255, 100, 0, 0.6), 0 0 8px rgba(255, 50, 0, 0.5);
}

.high-contrast .cell.hit::after {
  width: 22px;
  height: 22px;
  background: radial-gradient(circle, #ffffff 0%, #ffcc00 30%, #ff3300 60%, transparent 100%);
  box-shadow: 0 0 10px 4px rgba(255, 150, 0, 0.7), 0 0 20px 8px rgba(255, 50, 0, 0.3);
}

/* Miss: clearer contrast indicator */
.high-contrast .cell.miss {
  background: linear-gradient(135deg, rgba(20, 40, 70, 0.95) 0%, rgba(15, 30, 55, 0.95) 100%);
  border: 2px solid rgba(150, 180, 210, 0.5);
}

.high-contrast .cell.miss::after {
  width: 14px;
  height: 14px;
  background: radial-gradient(circle, rgba(255, 255, 255, 0.95) 0%, rgba(200, 220, 240, 0.5) 50%, transparent 100%);
  opacity: 1;
  box-shadow: 0 0 6px rgba(255, 255, 255, 0.5);
}

/* Sunk: very distinct dark red with bright border */
.high-contrast .cell.sunk {
  background: linear-gradient(135deg, #990000 0%, #660000 50%, #990000 100%);
  border: 2px solid #ff4444;
  box-shadow: inset 0 0 8px rgba(255, 0, 0, 0.4);
}

.high-contrast .cell.sunk::after {
  font-size: 1.4rem;
  font-weight: 900;
  color: #ffffff;
  text-shadow: 0 0 8px rgba(255, 50, 50, 0.8);
}

/* Ship cells in high contrast */
.high-contrast .cell.ship {
  background: linear-gradient(145deg, #5a8abf 0%, #4a7aaf 40%, #6090c0 70%, #5a8abf 100%);
  border: 2px solid rgba(130, 180, 230, 0.6);
  box-shadow: inset 0 0 6px rgba(100, 160, 220, 0.3);
}

/* Enemy grid hover in high contrast */
.high-contrast #enemy-grid .cell:not(.hit):not(.miss):not(.sunk):hover {
  box-shadow: inset 0 0 16px rgba(46, 204, 113, 0.5), 0 0 10px rgba(46, 204, 113, 0.5);
  border-color: rgba(46, 204, 113, 0.6);
}

/* Status message contrast */
.high-contrast #status-message {
  color: #ffffff;
  border: 2px solid rgba(100, 130, 170, 0.5);
}

.high-contrast #status-message.status-hit {
  color: #ff4444;
  border-color: rgba(255, 50, 50, 0.5);
}

.high-contrast #status-message.status-miss {
  color: #b0c4de;
}

.high-contrast #status-message.status-sunk {
  color: #ffaa00;
  border-color: rgba(255, 170, 0, 0.5);
}

/* Fleet status text */
.high-contrast .fleet-status h3,
.high-contrast .combat-log h3 {
  color: #e0e1dd;
}

.high-contrast .ship-status {
  color: #ffffff;
}

.high-contrast .ship-status.sunk-status {
  color: #ff6666;
  opacity: 0.7;
}

/* Log entries */
.high-contrast .log-entry {
  color: #e0e1dd;
}

.high-contrast .log-entry.hit {
  color: #ff8888;
}

.high-contrast .log-entry.sunk {
  color: #ffcc44;
}


/* ============================================================
   REDUCED MOTION — Disable animations for prefers-reduced-motion
   ============================================================ */

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.001ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.001ms !important;
  }

  body::after {
    animation: none !important;
  }

  .cell::before {
    animation: none !important;
  }

  .cell.hit {
    animation: none !important;
  }

  .cell.miss {
    animation: none !important;
  }

  .cell.sunk {
    animation: none !important;
  }

  .ship-option.active {
    animation: none !important;
  }

  .game-over-box.victory #game-over-message {
    animation: none !important;
    filter: none !important;
  }

  #play-again-btn::before {
    transition: none !important;
  }

  .ship-option::before {
    transition: none !important;
  }

  .log-entry {
    animation: none !important;
  }

  /* Disable particle canvas rendering in reduced motion */
  #particle-canvas {
    display: none !important;
  }
}
